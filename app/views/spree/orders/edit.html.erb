<% @body_id = 'cart' %>


<div data-hook="cart_container">

  <h1>Votre Panier</h1>

  <% if @order.line_items.empty? %>
    <div data-hook="empty_cart">
      <p>Votre panier est vide</p>
      <p><%= link_to 'Faire du shopping !', products_path, class: 'update-button', id: 'ifempty_cart' %></p>
    </div>

  <% else %>
  
  <div id="option_cart" data-hook>
    <%= button_tag t('Rafraîchir'), class: "button_cart", id: "update-button" %>

    <%= form_tag empty_cart_path, method: :put do %>
    <p id="clear_cart_link" data-hook><%= submit_tag 'Vider le panier', class: "button_cart",  id: 'clear_cart' %></p>     
  </div>
  <% end %> 

  <p>Pas terminé ?
  <%= link_to t('Continuer mon Shopping !'), products_path, class: 'continue_cart' %>
  </p>

  <div class='recap'>
    <p>Récapitulatif</p>
    <p>Sous total : <%= @order.display_total %></p>
    <%= render template: 'spree/coupon_codes/new' %>
    <%= button_tag t('Passer au paiement'), class: 'button_cart', id: 'checkout_cart', name: 'checkout'%>
  </div>
  
  <%= form_for @order, url: update_cart_path, html: {id: 'update-cart'} do |order_form| %>
      
      <div data-hook="cart_items">
      <%= render 'spree/orders/form', order_form: order_form %>
      </div>

  <% end %>

  <div id="option_cart" data-hook>
    <%= button_tag t('Rafraîchir'), class: "button_cart", id: "update-button" %>

    <%= form_tag empty_cart_path, method: :put do %>
    <p id="clear_cart_link" data-hook><%= submit_tag 'Vider le panier', class: "button_cart",  id: 'clear_cart' %></p> 
    <% end %>     
  </div>

<% end %>
</div>
